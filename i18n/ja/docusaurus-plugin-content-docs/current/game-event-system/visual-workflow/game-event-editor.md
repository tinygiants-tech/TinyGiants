---
sidebar_label: 'ゲームイベント編集'
sidebar_position: 3
---

import Tabs from '@theme/Tabs';

import TabItem from '@theme/TabItem';



# ゲームイベントエディター

イベントライブラリの整理、洗練、保守のための主要なワークスペースです。**[Game Event Creator](./game-event-creator.md)**が新しいイベントを生成するためのものである一方、**Editor**はそれらのライフサイクル全体を管理する場所です。

![alt text](/img/game-event-system/visual-workflow/game-event-editor/editor-window-full.png)


---

## 🚀 エディターを開く

以下の方法でエディターにアクセスします:

**システムダッシュボードから:**
```
Game Event System Window → 「Game Event Editor」をクリック
```

![alt text](/img/game-event-system/visual-workflow/game-event-editor/hub-core-tools.png)

---

## 🎛️ 構成バー

ウィンドウの上部に配置され、このバーは作業範囲を決定します。

<img src="/img/game-event-system/visual-workflow/game-event-editor/editor-config-bar.png" alt="Configuration Bar" className="img-inline" />

### Manager選択

**目的**: エディターをシーン内のアクティブな`GameEventManager`に接続します。

**動作**:

- ✅ 起動時にManagerを自動検出
- 🔄 シーン切り替え時に更新
- 📌 ピンボタンでManagerインスペクターを開く

:::tip マルチシーンワークフロー
複数のシーンが開いている場合、エディターは**アクティブシーン**内のManagerをターゲットにします。シーンを切り替えると、接続が自動的に更新されます。
:::

---

### データベースセレクター

作業に集中するために異なるイベントデータベース間を切り替えます。

![alt text](/img/game-event-system/visual-workflow/game-event-editor/editor-database-switch.png)

:::tip アクティブなデータベースのみが表示されます
ドロップダウンには、**[Game Event Manager](./game-event-manager.md)**で**アクティブ**としてマークされたデータベースのみが表示されます。データベースが見つからない場合は、Managerインスペクターでそのアクティブ状態を確認してください。
:::

---

## 🛠️ ツールバー&表示モード

大規模なイベントライブラリを管理するための強力なフィルタリングとビューコントロール。

<img src="/img/game-event-system/visual-workflow/game-event-editor/editor-toolbar.png" alt="Editor Toolbar" />

### ビューモード

2つの表示戦略を切り替えます:


| モード          | アイコン      | 最適な用途                           | 動作                                |
| ------------- | --------- | ---------------------------------- | --------------------------------------- |
| **ページモード** | `1 / 5`   | 大規模データベース(100以上のイベント)      | ページでイベントを表示(1ページあたり10-100) |
| **フルモード** | グリッドアイコン | 小規模データベースまたは一括操作 | すべてのイベントを含む単一のスクロール可能なリスト  |

**モード切り替え**:
- ツールバーのグリッドアイコンをクリック
- 設定はセッション間で保存されます

**ページサイズオプション**: 1ページあたり10、20、50、または100イベント(数字をクリックして変更)

---

### **🧩** スマートフィルタリングシステム

必要なものを正確に見つけるための3層のフィルタリング:

<Tabs>
<TabItem value="category" label="1️⃣ カテゴリフィルター" default>

**カテゴリマッチング** 

特定のカテゴリからイベントを表示します。

**使用法**

- カテゴリ: All ➔ 🟦 **すべて**のイベントを表示
- カテゴリ: Combat ➔ 🟥 **Combat**イベントのみを表示(Damage、Death、Spawn)
- カテゴリ: UI ➔ 🟩 **UI**イベントのみを表示(Click、Hover、Open)

:::tip **ソース**

カテゴリはイベントの**Category**フィールドで定義されます(リストで編集可能)。

:::

</TabItem>

<TabItem value="type" label="2️⃣ 型フィルター">

**シグネチャマッチング**

基盤となるC#パラメータ型でイベントをフィルタリングします。

**使用法**

- 型: All ➔ ⚪ **すべて**のシグネチャ型を表示
- 型: void ➔ 🔘 **パラメータなし**イベントのみを表示
- 型: Int32 ➔ 🔢 `public Int32GameEvent`のみを表示
- 型: GameObject ➔ 📦 **GameObject**参照イベントのみを表示

:::tip **利用可能な型**

ドロップダウンは、データベースに現在存在するイベントに基づいて**自動入力**されます。

:::

</TabItem>

<TabItem value="search" label="3️⃣ 検索バー">

**ファジー検索**

イベント名による高性能なリアルタイムフィルタリング。

**使用法**

- ⌨️ **検索:** damage ➔ 🔍 部分文字列に**一致する**すべてのイベントを表示(大文字小文字を区別しない)
  - ⚡ `OnDamageTaken`
  - ⚡ `OnDamageDealt`
  - ⚡ `ApplyDamageMultiplier`

**機能**

- 🚀 **即座のフィルタリング** — 入力中に結果がすぐに更新されます。
- 🔡 **大文字小文字を区別しない** — DAMAGE、Damage、damageは同じ結果を生成します。
- 🧩 **部分一致** — 名前の任意の部分に一致(接頭辞、接尾辞、または中間)。

:::tip **検索をクリア**
バー内の**×**ボタンをクリックするか、Escキーを押してビューをリセットします。
:::

</TabItem>

</Tabs>

---

### 🔀 マルチレイヤーフィルタリング(組み合わせ)

3つのフィルターすべてが**AND論理**を使用して連携し、最も具体的な結果に絞り込むのに役立ちます。

**シナリオ例**
特定の健康関連の戦闘イベントを見つけるには、次のように設定します:

> 🟦 **カテゴリ:** Combat ➕ 🔢 **型:** Int32 ➕ ⌨️ **検索:** damage

**🎯 結果:**

> 🔍 名前に「**damage**」を含む**Combat**カテゴリ、**Integer**型のイベントのみを表示(例: OnDamageTaken)。

### 🧹 クイックリセット

最初からやり直す必要がありますか?フルリストへの復帰は即座です。

- **アクション:** カテゴリ&型を**All**に設定 + 検索バーを**クリア**。
- **ショートカット:** 検索バーの×ボタンを押し、ドロップダウンから「All」を選択すると、すぐにフルビューが復元されます。

:::tip **プロのヒント: 効率性**
システムは、異なるデータベースタブ間を切り替えても、フィルター設定を記憶し、シームレスなワークフローを保証します。
:::

---

## 📝 イベントリスト

各行は、編集可能なプロパティとアクションボタンを持つ1つのイベントアセットを表します。

<img src="/img/game-event-system/visual-workflow/game-event-editor/editor-event-row.png" alt="Event List Row" />

### 編集可能なフィールド

<Tabs>
<TabItem value="category" label="1️⃣ カテゴリフィールド" default>

#### カテゴリフィールド

イベントを論理グループに整理します。

**使用法**:

- クリックして編集
- Enterキーを押すか、クリックして他の場所に移動して保存
- 変更は即座に適用されます

</TabItem>

<TabItem value="name" label="2️⃣ 名前フィールド">

#### 名前フィールド

イベントアセットの名前を変更します。

**主要機能**: 🔒 **GUID保護リネーミング**

**ファイルリネーミング**:
イベントの名前を変更すると、`.asset`ファイルが自動的に一致するように名前変更されます:
```
変更前: OnPlayerDied.asset
変更後:  OnCharacterDeath.asset
```

:::tip 安全なリネーミング
UnityのGUIDシステムのおかげで、イベントを恐れずに名前変更できます。何も壊れません!これはシステムの最も強力な機能の1つです。ただし、同じデータベース内で同じ名前のイベントを定義しないことが最善です。この習慣は将来的に不要な混乱を招く可能性があります。
:::

</TabItem>

</Tabs>

---

### アクションボタン

各行に4つのボタンがあり、関連ツールへの迅速なアクセスを提供します:

#### 📄 参照フィールド(読み取り専用)

完全な型シグネチャを持つ実際のイベントアセットを表示します。

**アクション**:

- **左クリック**: Projectウィンドウでアセットを選択してPing
- **右クリック**: オプション付きコンテキストメニュー:
  - GUIDをコピー
  - 名前をコピー
  - Projectでping
  - アセットを開く

---

#### 🎯 ビヘイビアボタン(カラーコード)

高度なイベントビヘイビア(アクション、条件、遅延、繰り返し、ループ、永続)を構成します。

**ボタンの状態**:

| 色    | アイコン | 意味                | ツールチップ                |
| -------- | ---- | ---------------------- | ---------------------- |
| 🟢 緑  | ✓    | 構成済み(インスペクター) | インスペクターバインディングあり |
| 🔵 青   | ▶    | 構成済み(実行時)   | 実行時リスナーあり  |
| 🟡 オレンジ | ⚠    | 未構成         | バインディングなし        |

:::tip 

完全なイベントビヘイビア構成について学ぶには、**[Game Event Behavior Window](./game-event-behavior.md)**を開いてください。

:::

---

#### 🔍 参照ファインダー

このイベントが現在のシーンで使用されている場所を発見します。

**使用例**: イベントを削除する前に、何かがそれを使用しているかを確認します。

:::tip 

その強力なシーン参照ルックアップ機能について詳しく学ぶには、**[Game Event Reference Window](./game-event-finder.md)**にジャンプできます。

:::

---

#### 🗑️ 削除ボタン

データベースからイベントアセットを削除します。

**動作**:
1. ゴミ箱アイコンをクリック
2. 確認ダイアログが表示される
3. イベントの詳細(名前、型、カテゴリ)を表示
4. 確認 → イベントが完全に削除される

**削除されるもの**:
- ✅ イベントアセット(`.asset`ファイル)
- ✅ データベース内のサブアセットエントリ
- ✅ Manager内の関連するバインディング

**壊れないもの**:
- ❌ シーンは壊れません(参照は`Missing`になります)
- ❌ スクリプトはエラーになりません(nullチェックで処理すべき)

:::danger 元に戻せません
削除は永続的です。使用状況を確認するために、最初に**参照ファインダー**を使用してください。
:::

---

## ⚡ グローバルアクション(右上ツールバー)

関連ワークフローへの迅速なアクセス:

### 🕸️ フローグラフ

ビジュアルイベントチェーンとオーケストレーションロジックを構築します。

**ボタン**: "Flow Graph"

**開くもの**: **[Game Event Flow Editor](../flow-graph/game-event-node-editor.md)**

**使用する場合**:
- イベントAがイベントB、C、Dをトリガーする必要がある
- 遅延を伴う順次実行が必要
- 複雑な条件分岐を構築している

---

### ➕ 新規イベント

複数のイベントを一度にバッチ作成します。

**ボタン**: "New Event"

**開くもの**: **[Game Event Creator](./game-event-creator.md)**

**使用する場合**:

- 同じまたは異なる型の多くのイベントを作成
- カスタム型からイベントを生成
- バルクイベント作成ワークフロー

---

### 🗑️ イベント削除(バッチモード)

大規模データベースの効率的なメンテナンスのために、Editorは専用のバッチ削除モードをサポートしています。

#### **バッチモードへの移行**

標準ツールバーの右端にある**Delete Event**ボタンをクリック(下の画像参照)して、選択インターフェースを切り替えます。

![alt text](/img/game-event-system/visual-workflow/game-event-editor/editor-batch-mode.png)

#### **選択コントロール**

クリックすると、ツールバーがバッチ操作を提供するように変換され、各イベント行の横に選択チェックボックスが表示されます:

![alt text](/img/game-event-system/visual-workflow/game-event-editor/editor-batch-delete.png)

| アクション         | 説明                                                  |
| -------------- | ------------------------------------------------------------ |
| **Select All** | リストに現在表示されているすべてのイベントをチェックします(アクティブなフィルターを尊重)。 |
| **Delete**     | 完全削除のためにすべての選択されたイベントをリストする最終確認ダイアログを開きます。 |
| **Cancel**     | バッチモードを終了し、変更を加えずに現在のすべての選択をクリアします。 |

**ワークフローステップ:**

1. **Delete Event**をクリックして選択モードに入ります。
2. 特定のイベントを手動でチェックするか、**Select All**を使用します。
3. **Delete**をクリックして削除を処理するか、**Cancel**をクリックして標準ビューに戻ります。

:::warning バルク削除の安全性

- **不可逆:** バルク削除は元に戻せません。
- **フィルター感度:** 「Select All」は現在のフィルター基準(カテゴリ/型/検索)を満たすイベントのみに影響します。
- **並べ替え無効:** バッチモード中は、誤った移動を防ぐためにドラッグ&ドロップ並べ替えハンドル(☰)が非表示になります。

:::

---

## 🎨 行の並べ替え(ドラッグ&ドロップ)

行をドラッグしてイベントの順序を変更します:

**並べ替え方法**:
1. 任意の行の左側にあるハンドルアイコン(☰)にホバー
2. クリックして垂直にドラッグ
3. 新しい位置にドロップするために放す

**使用可能な場合**:

- ✅ アクティブなフィルターなし(カテゴリ: All、型: All、検索: 空)
- ✅ バッチ選択モードでない

**無効な場合**:

- ❌ 任意のフィルターがアクティブ(視覚的連続性を壊す)
- ❌ バッチ選択モードが有効

**順序が重要な理由**:
イベントの順序は以下に影響します:

- ドロップダウンでの表示順序
- 一部のツールでのアルファベット順グループ化
- 個人的な整理の好み

:::info 順序はデータベース固有
各データベースには独自のイベント順序があります。データベースを切り替えても、それぞれの個別の順序が保持されます。
:::

---

## 📊 統計バッジ

ヘッダーに配置され、リアルタイムのイベント数を表示します:

**表示**: `150 Events`(例)

**カウントするもの**:
- **現在選択されているデータベース**内の総イベント数
- イベントの作成/削除時に即座に更新
- フィルターがアクティブな場合、フィルタリングされたカウントを反映

---

## ❓ トラブルシューティング

このセクションは、一般的な問題とその解決策をカバーしています。ここにリストされていない問題に遭遇した場合は、エラーログについてコンソールを確認してください。

---

### 1. イベントが表示されない
**問題**: イベントを作成したが、イベントリストに表示されない。

#### **アクティブなデータベースを確認**
1. **Database**ドロップダウンメニューを確認します。
2. 正しいデータベースが選択されているか確認します。
3. **データベースを切り替えて**リストを更新してみてください。

#### **フィルターを確認**
*   **カテゴリ** -> `All`に設定
*   **型** -> `All`に設定
*   検索バーを**クリア**。
*   フィルターをリセットした後にイベントが表示されるか確認。

#### **Managerステータスを確認**
1. **Manager**フィールドをクリック -> **Ping Inspector**。
2. データベースが**アクティブ**(緑色のバッジ)であることを確認。
3. **非アクティブ**と表示されている場合は、スイッチを**アクティブ**に切り替えます。

:::info 動的コンパイル

上記のチェックがすべて異常でない場合は、任意のコードを変更してUnityコンパイルをトリガーしてみてください。これによりデータベースステータスが更新されます。Editorウィンドウで再度確認して、作成されたイベントが発生したかどうかを確認してください。

:::

:::warning 不明な例外

それでも作成できない場合は、私に連絡してください

:::

---

### 2. イベントプロパティを編集できない
**問題**: **カテゴリ**または**名前**フィールドがグレーアウトされて編集できない。

**潜在的な原因**: イベントが**ロックされたアセット**の一部であるか、データベースファイルが**読み取り専用**に設定されている可能性があります。

**解決策**:
*   プロジェクト内のデータベースファイルが**書き込み可能**(OSで読み取り専用でない)か確認。
*   現在**プレハブ分離モード**でないことを確認。
*   イベントアセットがバージョン管理システム(例: PerforceまたはGit LFS)で**ロック/チェックアウト**されていないか確認。

---

### 3. 並べ替えが機能しない
**問題**: イベントを並べ替えるために行をドラッグしても機能しない。

**チェックリスト**:
ドラッグ&ドロップ並べ替えを有効にするには、以下の条件が満たされていることを確認してください:

- すべてのフィルター(カテゴリ/型)が**「All」**に設定されているか?
- 検索バーが**空**か?
- バッチ選択モードに**なっていない**か?

:::warning

並べ替えは、フィルタリングされていない完全なリストを表示しているときにのみ使用できます。

:::

---

### 4. ビヘイビアボタンが開かない
**問題**: ビヘイビアボタンをクリックしても何も起こらない。

#### **Manager割り当てを確認**
**Manager**フィールドが`None`を表示している場合:
1. **自動検出**システムは通常それを見つけるはずです。
2. 失敗した場合は、シーンからManagerオブジェクトをフィールドに**手動でドラッグ**します。

#### **コンソールでエラーを確認**
*   **Console**ウィンドウを開きます(`Ctrl+Shift+C`)。
*   **赤いエラー**(例外)を探します。
*   スクリプトエラーはUIイベントの発火を妨げる可能性があるため、最初に**コンパイルの問題**を修正します。

:::tip ワークフロー推奨
このウィンドウをインスペクターの横にドッキングしておいてください。リストでイベントを選択すると、インスペクターに完全なアセット詳細が表示されます—ワークスペースを離れることなく迅速なプロパティチェックに最適です。
:::