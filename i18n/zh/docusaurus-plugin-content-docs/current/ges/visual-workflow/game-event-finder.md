---
sidebar_label: '查找游戏事件'
sidebar_position: 7
---

# 游戏事件查找器

**引用查找器** 是一个强大的诊断工具，可以扫描整个活动场景，定位引用特定游戏事件的每个GameObject、脚本和组件。

它回答了一个关键问题：***"如果我更改此事件，谁会受到影响？"***

## 🚀 访问工具

您可以从 [**游戏事件编辑器**](./game-event-editor.md) 打开引用查找器
```
游戏事件编辑器 → 点击事件行上的🔍图标
```

窗口打开时显示该事件的所有场景引用。

---

## 🖼️ 界面模式

窗口支持两种可视化模式以适应不同的检查需求。您可以使用工具栏按钮在它们之间切换。

### 列表模式（平面视图）

显示所有引用的直观、可排序列表。

![List Mode View](/img/game-event-system/visual-workflow/game-event-finder/game-event-finder-list.png)

**最适合**：快速扫描总使用量或按路径/名称排序。

---

### 分组模式（脚本视图）

按持有引用的 **脚本组件** 对引用进行分组。

![Grouped Mode View](/img/game-event-system/visual-workflow/game-event-finder/game-event-finder-grouped.png)

**最适合**：了解哪些*系统*依赖于此事件（例如，看到5个 `EnemyAI` 脚本和1个 `GameManager` 正在使用它）。

**切换**：点击工具栏中的 **List** / **Grouped** 按钮在模式之间切换。

---

## 📊 状态指示器

每行提供有关引用对象状态的实时反馈：

| 图标 | 状态 | 描述 |
| :--- | :----------- | :----------------------------------------------------------- |
| 🟢 | **活动** | GameObject当前在层级视图中处于活动状态。事件绑定已生效。 |
| 🔴 | **非活动** | GameObject已禁用。事件绑定在启用之前不会触发。 |

---

## 📝 引用详情

列提供每个引用的详细上下文：

| 列 | 描述 |
| ------------------ | ------------------------------------------------------------ |
| **GameObject** | 场景中对象的名称 |
| **层级路径** | 完整的面包屑路径（例如，`Environment/Enemies/Grunt_01`） |
| **脚本** | 引用事件的C#类名称（例如，`PlayerHealth`） |
| **类型** | 代码中的变量名称（例如，`onDeathEvent`） |

:::tip 智能扫描
该工具使用 **反射** 扫描MonoBehaviour上的所有公共和私有字段。它可以找到即使隐藏在私有序列化字段中的引用！
:::

------

## 🔍 搜索与排序

**搜索栏**：输入以按GameObject名称、层级路径、脚本名称或字段名称过滤引用。支持部分匹配。

**可排序列**：点击任何列标题按该列排序。再次点击以反转排序顺序。

---

## ⚡ 快速操作

右侧的 **操作** 列提供三个强大的导航工具，可立即跳转到目标对象。

| 按钮 | 图标 | 操作 | 使用场景 |
| :-------- | :--- | :--------------------- | :----------------------------------------------------------- |
| **Ping** | 🔍 | **在层级视图中定位** | 在层级视图窗口中闪烁对象以显示其位置，而不更改选择 |
| **Focus** | 📋 | **在Inspector中聚焦** | 选择对象并立即将 **Inspector** 带入焦点，允许您立即编辑脚本 |
| **Frame** | 🎥 | **在场景中框选** | 选择对象并移动 **场景视图相机** 以完美框选它 |

---

## 🛠️ 工具栏功能

工具栏提供用于管理引用视图的附加控件：

**刷新按钮**（`🔄`）：重新扫描当前场景以更新引用列表。在对场景进行更改后很有用。

**全选按钮**（`👁️`）：一次性在层级视图中选择所有引用的GameObject。适用于批量操作。

**列表/分组切换**（`📁` / `📄`）：在平面列表视图和分组脚本视图之间切换。

---

## 💡 实际使用场景

### 重构之前

**问题**："如果我重命名或删除此事件，哪些对象会损坏？"

**答案**：在进行更改之前打开查找器以查看所有引用。相应地更新每个引用。

---

### 调试

**问题**："我的事件没有按预期触发。"

**解决方案**：使用查找器验证活动GameObject上是否存在引用。检查状态指示器（🟢/🔴）以确保对象已启用。

---

### 清理与优化

**目标**："删除未使用的事件以清理项目。"

**过程**：为每个事件打开查找器。如果显示"0 References"，则该事件在该场景中可以安全删除。

---

### 团队文档

**需求**："为团队成员记录哪些系统使用特定事件。"

**结果**：查找器提供了可以截图或记录的完整事件使用列表。

---

## ❓ 故障排除

### 未找到引用

**可能原因**：

- 事件在当前场景中未使用
- 引用存在于其他场景（查找器仅扫描活动场景）
- 事件仅通过 `AddListener()` 在代码中使用（无法通过反射扫描检测）
- 引用存在于场景中未实例化的预制件中

**解决方案**：检查其他场景或在事件资产上使用Unity内置的"在场景中查找引用"。

---

### 非活动引用

**原因**：GameObject在层级视图中被禁用。

**影响**：事件绑定存在，但在GameObject启用之前不会触发。

**操作**：启用GameObject或验证这是有意的行为（例如，对象池中的对象）。

---

### 引用计数不匹配

**常见原因**：

- 每个预制件实例都计为单独的引用
- 同一脚本中的多个字段各自计为单独的引用
- 禁用的GameObject包含在计数中（检查状态图标）

---

## 📖 工作流示例

**场景**：您正在重构伤害系统，需要更改 `OnPlayerDamaged` 事件。

**步骤1**：打开游戏事件编辑器

**步骤2**：找到 `OnPlayerDamaged` 事件 → 点击🔍图标

**步骤3**：查看查找器结果：
```
找到3个引用：
├─ PlayerHealth (脚本) - 活动 🟢
├─ UIHealthBar (脚本) - 活动 🟢  
└─ DeathScreen (脚本) - 非活动 🔴
```

**步骤4**：使用快速操作导航到每个引用：

- 点击🔍 **Ping** 在层级视图中定位
- 点击📋 **Focus** 在Inspector中打开
- 根据需要更新每个引用

**步骤5**：在了解所有使用点的情况下安全完成重构

---

## 🔗 相关工具

**查找器与编辑器**：

| 工具 | 范围 | 最适合 |
| ----------------------------------------------- | ----------------------- | ------------------------------- |
| **[游戏事件编辑器](./game-event-editor.md)** | 项目中的所有事件 | 浏览和管理事件库 |
| **游戏事件查找器**（此工具） | 单个事件引用 | 影响分析和调试 |

:::tip 专业提示
在删除或重命名事件之前，始终检查查找器。即使在当前场景中显示"0 References"的事件也可能在其他场景中使用或通过基于代码的监听器使用。
:::

:::info 范围限制
查找器 **仅扫描活动场景**。要检查多个场景中的引用：

1. 单独打开每个场景
2. 在每个场景中运行查找器
3. 手动编译结果

对于真正的项目范围资产搜索，在事件资产本身上使用Unity内置的"在场景中查找引用"功能。
:::