---
sidebar_label: '编辑游戏事件'
sidebar_position: 3
---

import Tabs from '@theme/Tabs';

import TabItem from '@theme/TabItem';



# 游戏事件编辑器

您组织、优化和维护事件库的主要工作区。虽然 **[游戏事件创建器](./game-event-creator.md)** 用于创建新事件，但 **编辑器** 是您管理其整个生命周期的地方。

![alt text](/img/game-event-system/visual-workflow/game-event-editor/editor-window-full.png)


---

## 🚀 打开编辑器

通过以下方法访问编辑器：

**从系统仪表板：**
```
游戏事件系统窗口 → 点击"Game Event Editor"
```

![alt text](/img/game-event-system/visual-workflow/game-event-editor/hub-core-tools.png)

---

## 🎛️ 配置栏

位于窗口顶部，此栏决定您的工作范围。

![alt text](/img/game-event-system/visual-workflow/game-event-editor/editor-config-bar.png)

### 管理器选择

**目的**：将编辑器连接到场景中活动的 `GameEventManager`。

**行为**：

- ✅ 启动时自动检测管理器
- 🔄 切换场景时更新
- 📌 固定按钮打开管理器Inspector

:::tip 多场景工作流
如果您打开了多个场景，编辑器将以 **活动场景** 中的管理器为目标。切换场景以自动更新连接。
:::

---

### 数据库选择器

在不同的事件数据库之间切换以聚焦您的工作。

![alt text](/img/game-event-system/visual-workflow/game-event-editor/editor-database-switch.png)

:::tip 仅显示活动数据库
下拉菜单仅显示在 **[游戏事件管理器](./game-event-manager.md)** 中标记为 **活动** 的数据库。如果您的数据库缺失，请在管理器Inspector中检查其活动状态。
:::

---

## 🛠️ 工具栏与显示模式

用于管理大型事件库的强大过滤和视图控制。

![alt text](/img/game-event-system/visual-workflow/game-event-editor/editor-toolbar.png)

### 视图模式

在两种显示策略之间切换：


| 模式 | 图标 | 最适合 | 行为 |
| ------------- | --------- | ---------------------------------- | --------------------------------------- |
| **分页模式** | `1 / 5` | 大型数据库（100+事件） | 分页显示事件（每页10-100个） |
| **完整模式** | 网格图标 | 小型数据库或批量操作 | 包含所有事件的单个可滚动列表 |

**切换模式**：
- 点击工具栏中的网格图标
- 您的偏好在会话之间保存

**页面大小选项**：每页10、20、50或100个事件（点击数字更改）

---

### **🧩** 智能过滤系统

三层过滤以精确找到您需要的内容：

<Tabs>
<TabItem value="category" label="1️⃣ 类别过滤器" default>

**类别匹配** 

显示特定类别的事件。

**用法**

- 类别：All ➔ 🟦 显示 **所有** 事件
- 类别：Combat ➔ 🟥 仅显示 **Combat** 事件（Damage、Death、Spawn）
- 类别：UI ➔ 🟩 仅显示 **UI** 事件（Click、Hover、Open）

:::tip **来源**

类别在事件的 **Category** 字段中定义（可在列表中编辑）。

:::

</TabItem>

<TabItem value="type" label="2️⃣ 类型过滤器">

**签名匹配**

按底层C#参数类型过滤事件。

**用法**

- 类型：All ➔ ⚪ 显示 **所有** 签名类型
- 类型：void ➔ 🔘 仅显示 **无参数** 事件
- 类型：Int32 ➔ 🔢 仅显示 `public Int32GameEvent`
- 类型：GameObject ➔ 📦 仅显示 **GameObject** 引用事件

:::tip **可用类型**

下拉菜单根据数据库中当前存在的事件 **自动填充**。

:::

</TabItem>

<TabItem value="search" label="3️⃣ 搜索栏">

**模糊搜索**

按事件名称进行高性能、实时过滤。

**用法**

- ⌨️ **搜索：** damage ➔ 🔍 显示所有 **匹配** 子字符串的事件（不区分大小写）
  - ⚡ `OnDamageTaken`
  - ⚡ `OnDamageDealt`
  - ⚡ `ApplyDamageMultiplier`

**功能**

- 🚀 **即时过滤** — 结果在您输入时立即更新。
- 🔡 **不区分大小写** — DAMAGE、Damage和damage产生相同的结果。
- 🧩 **部分匹配** — 匹配名称的任何部分（前缀、后缀或中间）。

:::tip **清除搜索**
点击栏中的 **×** 按钮或按Esc键重置视图。
:::

</TabItem>

</Tabs>

---

### 🔀 多层过滤（组合）

所有三个过滤器使用 **AND逻辑** 协同工作，帮助您深入到最具体的结果。

**示例场景**
要查找特定的与生命值相关的战斗事件，您可以设置：

> 🟦 **类别：** Combat ➕ 🔢 **类型：** Int32 ➕ ⌨️ **搜索：** damage

**🎯 结果：**

> 🔍 仅显示名称中包含"**damage**"的 **Combat** 类别、**Integer** 类型事件（例如OnDamageTaken）。

### 🧹 快速重置

需要重新开始？返回完整列表是即时的。

- **操作：** 将类别和类型设置为 **All** + **清除** 搜索栏。
- **快捷方式：** 按下搜索栏中的×按钮并从下拉菜单中选择"All"将立即恢复完整视图。

:::tip **专业提示：效率**
即使在不同的数据库选项卡之间切换，系统也会记住您的过滤器设置，确保无缝的工作流程。
:::

---

## 📝 事件列表

每行代表一个事件资产，具有可编辑的属性和操作按钮。

![alt text](/img/game-event-system/visual-workflow/game-event-editor/editor-event-row.png)

### 可编辑字段

<Tabs>
<TabItem value="category" label="1️⃣ 类别字段" default>

#### 类别字段

将事件组织成逻辑组。

**用法**：

- 点击编辑
- 按Enter或点击其他位置保存
- 更改立即应用

</TabItem>

<TabItem value="name" label="2️⃣ 名称字段">

#### 名称字段

重命名事件资产。

**关键功能**：🔒 **GUID保护的重命名**

**文件重命名**：
当您重命名事件时，`.asset` 文件会自动重命名以匹配：
```
之前：OnPlayerDied.asset
之后：OnCharacterDeath.asset
```

:::tip 安全重命名
由于Unity的GUID系统，您可以无畏地重命名事件。什么都不会破坏！这是系统最强大的功能之一。但最好不要在同一个数据库中定义同名事件，因为这种习惯可能会在未来引入不必要的混淆
:::

</TabItem>

</Tabs>

---

### 操作按钮

每行四个按钮提供快速访问相关工具：

#### 📄 引用字段（只读）

显示实际的事件资产及其完整类型签名。

**操作**：

- **左键点击**：在项目窗口中选择并定位资产
- **右键点击**：上下文菜单，带选项：
  - 复制GUID
  - 复制名称
  - 在项目中定位
  - 打开资产

---

#### 🎯 行为按钮（颜色编码）

配置高级事件行为（动作、条件、延迟、重复、循环和持久化）。

**按钮状态**：

| 颜色 | 图标 | 含义 | 提示 |
| -------- | ---- | ---------------------- | ---------------------- |
| 🟢 绿色 | ✓ | 已配置（Inspector） | 有Inspector绑定 |
| 🔵 蓝色 | ▶ | 已配置（运行时） | 有运行时监听器 |
| 🟡 橙色 | ⚠ | 未配置 | 尚无绑定 |

:::tip 

打开 **[游戏事件行为窗口](./game-event-behavior.md)** 以了解完整的事件行为配置。

:::

---

#### 🔍 引用查找器

发现此事件在当前场景中的使用位置。

**使用场景**：在删除事件之前，检查是否有任何内容正在使用它。

:::tip 

您可以跳转到 **[游戏事件引用窗口](./game-event-finder.md)** 以了解更多关于其强大的场景引用查找功能。

:::

---

#### 🗑️ 删除按钮

从数据库中删除事件资产。

**行为**：
1. 点击垃圾桶图标
2. 出现确认对话框
3. 显示事件详情（名称、类型、类别）
4. 确认 → 事件永久删除

**删除的内容**：
- ✅ 事件资产（`.asset` 文件）
- ✅ 数据库中的子资产条目
- ✅ 管理器中的任何关联绑定

**不会破坏的内容**：
- ❌ 场景不会破坏（引用变为 `Missing`）
- ❌ 脚本不会出错（空检查应该处理它）

:::danger 无法撤销
删除是永久性的。首先使用 **引用查找器** 检查使用情况。
:::

---

## ⚡ 全局操作（右上角工具栏）

快速访问相关工作流：

### 🕸️ 流程图

构建可视化事件链和编排逻辑。

**按钮**："Flow Graph"

**打开的内容**：**[游戏事件流程编辑器](../flow-graph/game-event-node-editor.md)**

**何时使用**：
- 您需要事件A触发事件B、C和D
- 您想要带延迟的顺序执行
- 您正在构建复杂的条件分支

---

### ➕ 新事件

一次批量创建多个事件。

**按钮**："New Event"

**打开的内容**：**[游戏事件创建器](./game-event-creator.md)**

**何时使用**：

- 创建许多相同或不同类型的事件
- 从自定义类型生成事件
- 批量事件创建工作流

---

### 🗑️ 删除事件（批量模式）

为了高效维护大型数据库，编辑器支持专用的批量删除模式。

#### **进入批量模式**

点击标准工具栏最右侧的 **Delete Event** 按钮（见下图）以切换选择界面。

![alt text](/img/game-event-system/visual-workflow/game-event-editor/editor-batch-mode.png)

#### **选择控制**

点击后，工具栏会转换为提供批量操作，并且每个事件行旁边会出现选择复选框：

![alt text](/img/game-event-system/visual-workflow/game-event-editor/editor-batch-delete.png)

| 操作 | 描述 |
| -------------- | ------------------------------------------------------------ |
| **全选** | 勾选列表中当前可见的每个事件（尊重活动过滤器）。 |
| **删除** | 打开最终确认对话框，列出所有选定的事件以进行永久删除。 |
| **取消** | 退出批量模式并清除所有当前选择而不做更改。 |

**工作流步骤：**

1. 点击 **Delete Event** 进入选择模式。
2. 手动勾选特定事件或使用 **全选**。
3. 点击 **删除** 处理删除，或 **取消** 返回标准视图。

:::warning 批量删除安全性

- **不可逆：** 批量删除无法撤销。
- **过滤器敏感性：** "全选"仅影响满足当前过滤条件的事件（类别/类型/搜索）。
- **禁用重新排序：** 在批量模式下，拖放重新排序句柄（☰）被隐藏以防止意外移动。

:::

---

## 🎨 行重新排序（拖放）

通过拖动行来更改事件顺序：

**如何重新排序**：
1. 将鼠标悬停在任何行左侧的句柄图标（☰）上
2. 点击并垂直拖动
3. 释放以放置在新位置

**何时可用**：

- ✅ 无活动过滤器（类别：All，类型：All，搜索：空）
- ✅ 不在批量选择模式

**何时禁用**：

- ❌ 任何过滤器处于活动状态（会破坏视觉连续性）
- ❌ 批量选择模式已启用

**为什么顺序很重要**：
事件顺序影响：

- 下拉菜单中的显示顺序
- 某些工具中的字母分组
- 个人组织偏好

:::info 顺序是数据库特定的
每个数据库都有自己的事件顺序。切换数据库会保留其各自的排序。
:::

---

## 📊 统计徽章

位于标题中，显示实时事件计数：

**显示**：`150 Events`（示例）

**计数内容**：
- **当前选定数据库** 中的总事件数
- 创建/删除事件时立即更新
- 过滤器处于活动状态时反映过滤后的计数

---

## ❓ 故障排除

本节涵盖常见问题及其解决方案。如果您遇到此处未列出的问题，请检查控制台的错误日志。

---

### 1. 事件未出现
**问题**：您创建了事件，但它们在事件列表中不可见。

#### **检查活动数据库**
1. 查看 **Database** 下拉菜单。
2. 确认是否选择了正确的数据库。
3. 尝试 **切换数据库** 以刷新列表。

#### **检查过滤器**
*   将 **Category** 设置为 `All`
*   将 **Type** 设置为 `All`
*   **清除** 搜索栏。
*   重置过滤器后检查事件是否出现。

#### **检查管理器状态**
1. 点击 **Manager** 字段 -> **Ping Inspector**。
2. 验证数据库是 **活动** 的（绿色徽章）。
3. 如果显示 **非活动**，将开关切换到 **活动**。

:::info 动态编译

如果以上检查均无异常，尝试修改任何代码以触发Unity编译，这将更新数据库状态。再次在编辑器窗口中检查创建的事件是否出现。

:::

:::warning 未知异常

如果仍然无法创建，请联系我

:::

---

### 2. 无法编辑事件属性
**问题**：**Category** 或 **Name** 字段显示为灰色且无法编辑。

**潜在原因**：事件可能是 **锁定资产** 的一部分，或者数据库文件设置为 **只读**。

**解决方案**：
*   验证项目中的数据库文件是否 **可写**（在操作系统中不是只读）。
*   确保您当前不在 **预制件隔离模式**。
*   检查事件资产是否在版本控制系统中 **锁定/签出**（例如Perforce或Git LFS）。

---

### 3. 重新排序不起作用
**问题**：拖动行以重新排序事件不起作用。

**检查清单**：
要启用拖放重新排序，请确保满足以下条件：

- 所有过滤器（类别/类型）是否设置为 **"All"**？
- 搜索栏是否 **为空**？
- 您是否 **不在** 批量选择模式？

:::warning

重新排序仅在查看完整的、未过滤的列表时可用。

:::

---

### 4. 行为按钮未打开
**问题**：点击行为按钮不会触发任何操作。

#### **检查管理器分配**
如果 **Manager** 字段显示 `None`：
1. **自动检测** 系统通常应该找到它。
2. 如果失败，从场景中 **手动拖动** 管理器对象到该字段。

#### **检查控制台错误**
*   打开 **Console** 窗口（`Ctrl+Shift+C`）。
*   查找 **红色错误**（异常）。
*   首先修复任何 **编译问题**，因为脚本错误可能会阻止UI事件触发。

:::tip 工作流推荐
将此窗口停靠在Inspector旁边。当您在列表中选择事件时，Inspector会显示其完整的资产详情——非常适合快速属性检查而无需离开工作区。
:::